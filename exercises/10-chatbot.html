<html><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252"><script src="pencilcodeguide.js"></script>
<script>

function filterblocks(a) {
  // Show 'say' block only on browsers that support speech synthesis.
  if (!window.SpeechSynthesisUtterance || !window.speechSynthesis) {
    a = a.filter(function(b) { return !/^@?say\b/.test(b.block); });
  }
  // Show 'listen' blocks only on browsers that support speech recognition.
  if (!window.webkitSpeechRecognition || window.SpeechRecognition) {
    a = a.filter(function(b) { return !/\blisten\b/.test(b.block); });
  }
  return a.map(function(e) {
    if (!e.id) {
      // As the id (for logging), use the first (non-puncutation) word
      e.id = e.block.replace(/^\W*/, '').
             replace(/^new /, '').replace(/\W.*$/, '');
      // If that doesn't turn into anything, use the whole block text.
      if (!e.id) { e.id = e.block; }
    }
    return e;
  });
}

//  This is where we customize the blocks palette 
PencilCodeGuide.session(
{
  palette : [
    {
      name: 'Move',
      color: 'lightblue',
      blocks: filterblocks([
        {
          block: '@fd 100',
          title: 'Move forward'
        }, {
          block: '@rt 90',
          title: 'Turn right'
        }, 
        {
          block: '@lt 90',
          title: 'Turn left'
        }, {
          block: '@bk 100',
          title: 'Move backward'
        }, 
        // {
        //   block: '@rt 180, 100',
        //   title: 'Make a wide right arc'
        // }, {
        //   block: '@lt 180, 100',
        //   title: 'Make a wide left arc'
        // }, 
        {
          block: '@speed 10',
          title: 'Set the speed of the turtle'
        }, 
        // {
        //   block: '@speed Infinity',
        //   title: 'Use infinite speed'
        // }, 
        // {
        //   block: '@home()',
        //   title: 'Jump to the origin, turned up'
        // }, {
        //   block: '@turnto 270',
        //   title: 'Turn to an absolute direction'
        // }, {
        //   block: '@moveto 100, 50',
        //   title: 'Move to coordinates'
        // }, {
        //   block: '@movexy 30, 20',
        //   title: 'Move by changing x and y'
        // }, 
        {
          block: '@jumpto 100, 50',
          title: 'Jump to coordinates without drawing'
        }, 
        // {
        //   block: '@jumpxy 30, 20',
        //   title: 'Jump changing x and y without drawing'
        // }, {
        //   block: '@pause 5',
        //   title: 'Do not move for five seconds'
        // }
      ])
    }, {
      name: 'Control',
      color: 'orange',
      blocks: filterblocks([
        // {
        //   block: 'for [1..3]\n  ``',
        //   title: 'Do something multiple times'
        // }, {
        //   block: 'for x in [0...10]\n  ``',
        //   title: 'Repeat something while counting up x'
        // }, {
        //   block: 'while `` < ``\n  ``',
        //   title: '  Repeat while a condition is true'
        // }, 
        // {
        //   block: 'if `` is ``\n  ``',
        //   title: 'Do something only if a condition is true'
        // }, 
        {
          block: 'if `` > ``\n  ``',
          title: 'Do something only if the left hand side is greater than the right'
        }, 
        // {
        //   block: 'if `` is ``\n  ``\nelse\n  ``',
        //   title:
        //       'Do something if a condition is true, otherwise something else',
        //   id: 'ifelse'
        // }, {
        //   block: "forever 1, ->\n  ``",
        //   title: 'Repeat something forever at qually-spaced times'
        // }, {
        //   block: "button \'Click\', ->\n  ``",
        //   title: 'Make a button and do something when clicked'
        // }, {
        //   block: "keydown \'X\', ->\n  ``",
        //   title: 'Do something when a keyboard key is pressed'
        // }, {
        //   block: "click (e) ->\n  ``",
        //   title: 'Do something when the mouse is clicked'
        // }
      ])
    }, {
      name: 'Art',
      color: 'purple',
      blocks: filterblocks([
         {
          block: '@pen purple, 10',
          title: 'Set pen color and size'
        }, 
        // {
        //   block: '@dot green, 50',
        //   title: 'Make a dot'
        // }, {
        //   block: '@box yellow, 50',
        //   title: 'Make a square'
        // }, {
        //   block: '@fill blue',
        //   title: 'Fill traced shape'
        // }, {
        //   block: '@wear \'apple\'',
        //   title: 'Use an image for the turtle'
        // }, {
        //   block: 'img \'/img/bird\'',
        //   title: 'Write an image on the screen'
        // }, {
        //   block: '@grow 3',
        //   title: 'Grow the size of the turtle'
        // }, {
        //   block: '@hide()',
        //   title: 'Hide the main turtle'
        // }, {
        //   block: '@show()',
        //   title: 'Show the main turtle'
        // }, {
        //   block: 'cs()',
        //   title: 'Clear screen'
        // }, {
        //   block: '@pu()',
        //   title: 'Lift the pen up'
        // }, {
        //   block: '@pd()',
        //   title: 'Put the pen down'
        // }, {
        //   block: '@drawon s',
        //   title: 'Draw on sprite s'
        // }, {
        //   block: '@drawon document',
        //   title: 'Draw on the document'
        // }
      ])
    }, {
      name: 'Operators',
      color: 'lightgreen',
      blocks: filterblocks([
        {
          block: 'x = 0',
          title: 'Set a variable',
          id: 'assign'
        }, 
        {
          block: 'x += 1',
          title: 'Increase a variable',
          id: 'increment'
        }, 
        {
          block: 'f = (x) ->\n  ``',
          title: 'Define a new function',
          id: 'funcdef'
        }, {
          block: 'f(x)',
          title: 'Use a custom function',
          id: 'funccall'
        }, 
        // {
        //   block: '`` is ``',
        //   title: 'Compare two values',
        //   id: 'is'
        // }, 
        // {
        //   block: '`` < ``',
        //   title: 'Compare two values',
        //   id: 'lessthan'
        // }, 
        {
          block: '`` > ``',
          title: 'Compare two values',
          id: 'greaterthan'
        }, 
        {
          block: '`` + ``',
          title: 'Add two numbers',
          id: 'add'
        }, 
        // {
        //   block: '`` - ``',
        //   title: 'Subtract two numbers',
        //   id: 'subtract'
        // }, 
        // {
        //   block: 'return `` - ``',
        //   title: 'Subtract two numbers',
        //   id: 'mysub'
        // }, 
        {
          block: 'return ``',
          title: 'return a value',
          id: 'myreturn'
        }, 
        {
          block: '`` * ``',
          title: 'Multiply two numbers',
          id: 'multiply'
        }, 
        // {
        //   block: '`` / ``',
        //   title: 'Divide two numbers',
        //   id: 'divide'
        // }, 
        // {
        //   block: '`` and ``',
        //   title: 'True if both are true',
        //   id: 'and'
        // }, {
        //   block: '`` or ``',
        //   title: 'True if either is true',
        //   id: 'or'
        // }, {
        //   block: 'not ``',
        //   title: 'True if input is false',
        //   id: 'not'
        // }, 
        {
          block: 'random 6',
          title: 'Get a random number less than n'
        }, 
        // {
        //   block: 'round ``',
        //   title: 'Round to the nearest integer'
        // }, {
        //   block: 'abs ``',
        //   title: 'Absolute value'
        // }, {
        //   block: 'max ``, ``',
        //   title: 'Get the larger of two numbers'
        // }, {
        //   block: 'min ``, ``',
        //   title: 'Get the smaller on two numbers'
        // }, {
        //   block: 'x.match /pattern/',
        //   title: 'Test if a text pattern is found in x',
        //   id: 'match'
        // }
      ])
    }, {
      name: 'Text',
      color: 'pink',
      blocks: filterblocks([
        {
          block: 'write \'Hello.\'',
          title: 'Write text in the document'
        }, 
        // {
        //   block: 'debug x',
        //   title: 'Log an object to debug'
        // }, {
        //   block: 'type \'zz*(-.-)*zz\'',
        //   title: 'Typewrite text in the document'
        // }, {
        //   block: 'typebox yellow',
        //   title: 'Type out a colored square'
        // }, {
        //   block: 'typeline()',
        //   title: 'Type in a new line'
        // }, {
        //   block: '@label \'spot\'',
        //   title: 'Write text at the turtle'
        // }, {
        //   block: "await read '?', defer x",
        //   title: "Pause for input from the user"
        // }, {
        //   block: "await readnum '?', defer x",
        //   title: "Pause for a number from the user"
        // }, {
        //   block: 'read \'?\', (x) ->\n  write x',
        //   title: 'Send input from the user to a function'
        // }, {
        //   block: 'readnum \'?\', (x) ->\n  write x',
        //   title: 'Send a number from the user to a function'
        // }
      ])
    }, 
    //{
    //   name: 'Sprites',
    //   color: 'teal',
    //   blocks: filterblocks([
    //     {
    //       block: 't = new Turtle red',
    //       title: 'Make a new turtle',
    //       id: 'newturtle'
    //     }, {
    //       block: 's = new Sprite()',
    //       title: 'Make a blank sprite',
    //       id: 'newsprite'
    //     }, {
    //       block: 'p = new Piano()',
    //       title: 'Make a visible instrument',
    //       id: 'newpiano'
    //     }, {
    //       block: 'q = new Pencil()',
    //       title: 'Make an invisible and fast drawing sprite'
    //     }, {
    //       block: 'if @touches x\n  ``',
    //       title: 'Do something only if touching the object x'
    //     }, {
    //       block: 'if @inside window\n  ``',
    //       title: 'Do something only if inside the window'
    //     }
    //   ])
    // }, {
    //   name: 'Sound',
    //   color: 'indigo',
    //   blocks: filterblocks([
    //     {
    //       block: '@play \'c G/G/ AG z\'',
    //       title: 'Play music notes in sequence'
    //     }, {
    //       block: '@play \'[fA] [ecG]2\'',
    //       title: 'Play notes in a chord'
    //     }, {
    //       block: '@tone \'B\', 2, 1',
    //       title: 'Sound a note immediately',
    //       id: 'toneNote'
    //     }, {
    //       block: '@tone \'B\', 0',
    //       title: 'Silence a note immediately',
    //       id: 'toneNote0'
    //     }, {
    //       block: '@tone 440, 2, 1',
    //       title: 'Sound a frequency immediately',
    //       id: 'toneHz'
    //     }, {
    //       block: '@tone 440, 0',
    //       title: 'Silence a frequency immediately',
    //       id: 'toneHz0'
    //     }, {
    //       block: '@silence()',
    //       title: 'Silence all notes'
    //     }, {
    //       block: "await listen defer x",
    //       title: "Pause for spoken words from the user"
    //     }, {
    //       block: 'listen (x) ->\n  write x',
    //       title: 'Send spoken words from the user to a function'
    //     }, {
    //       block: '@say \'hello\'',
    //       title: 'Speak a word'
    //     }, {
    //       block: 'new Audio(url).play()',
    //       expansion: '(new Audio(\'https://upload.wikimedia.org/wikipedia/commons/1/11/06_-_Vivaldi_Summer_mvt_3_Presto_-_John_Harrison_violin.ogg\')).play()',
    //       title: 'Play an audio file'
    //     }
    //   ])
    // }, 
    {
      name: 'Snippets',
      color: 'deeporange',
      blocks: filterblocks([
        {
          block: "(done = false\nsay = 'Hello'\nwhile not done\n  await read say, defer response\n  say = ApplyRules(response)\n  done = CheckDone(response))",
          title: "basic chat loop",
          id: "chat-loop"
        },
        {
          block: "CheckDone = (input) ->\n  return input.match /quit/",
          title: "Function to check if input is 'quit'",
          id: "check-done-function"
        },
        {
          block: "ApplyRules = (input) ->\n  for rule in rules\n    matched = input.match rule.pattern\n    if matched\n      captured = matched[rule.position]\n      return rule.response.replace /#/,captured",
          title: "Function to apply all chatbot rules",
          id: "apply-rules-function"
        },
        {
          block: "rules = \n  [\n    { pattern: /(.*)you remember(.*)/, position: 2, response: 'Do you often think of #'}\n  ]",
          title: "Chatbot rules",
          id: "chatbot-rules"
        },
        {
          block: "do -> return { pattern: /``/, position: ``, response: ``}",
          title: "A blank chatbot rule",
          id: "blank-rule"
        }
        // {
        //   block: "(turtle.remove()\nspeed 100\nfoxLine = new Turtle()\nfoxLine.pen red, 1\nhareLine = new Turtle()\nhareLine.pen green, 1)",
        //   title: "Set up Lotka-Volterra simulation",
        //   id: "lotka-setup"
        // },
        // {
        //   block: "(for time in [1..500] by 10\n  hareLine.moveto time,hares\n  foxLine.moveto time,foxes\n  hares += NewHares hares,foxes\n  foxes += NewFoxes hares,foxes)",
        //   title: "Run Lotka-Volterra simulation",
        //   id: "run-lotka-simulation"
        // },
        // {
        //   block: "forever 10, ->\n  turnto lastmouse\n  fd 2",
        //   title: 'Continually move towards the last mouse position',
        //   id: "foreverFollowMouse"
        // }, {
        //   block: "forever 10, ->\n  if pressed 'W'\n    fd 2",
        //   title: 'Poll a key and move while it is depressed',
        //   id: "foreverPollKey"
        // }, {
        //   block: "forever 1, ->\n  fd 25\n  if not inside window\n    stop()",
        //   title: 'Move once per second until not inside window',
        //   id: "foreverInsideWindow"
        // }, {
        //   block: "click (e) ->\n  moveto e",
        //   title: 'Move to a location when document is clicked',
        //   id: "foreverMovetoClick"
        // }, {
        //   block: "button \'Click\', ->\n  write 'clicked'",
        //   title: 'Make a button and do something when clicked',
        //   id: "buttonWrite"
        // }, {
        //   block: "keydown \'X\', ->\n  write 'x pressed'",
        //   title: 'Do something when a keyboard key is pressed',
        //   id: "keydownWrite"
        // }, {
        //   block: "click (e) ->\n  moveto e",
        //   title: 'Move to a location when document is clicked',
        //   id: "clickMove"
        // }
      ])
    }
  ]
}
);
</script>
</head><body><h1>Turing Test & Chatbots</h1>

<p>This is a slightly simplified version of the ELIZA chatbot.</p>

<p>ELIZA emulates a non-directional therapist and reflects most of the user's input back at them, with small transformations.</p>

<p>ELIZA's responses are determined by the rules it knows.</p>

<p>Each rule consists of </p>
<ul>
    <li>A regular expression to match against the user's input</li>
    <li>A number specifying the capture group from the regular expression to use in ELIZA's response</li>
    <li>A templated response, with a '#' indicating where the capture group's text should go </li>
</ul>

<p>Below are some lines slightly adapted from the original program. </p>
<p>  The first line is the regular expression (0 means .*) and the following lines are the responses
  for that pattern (numbers are positions not capture groups).</p>

 <p> Try programming new rules for ELIZA using these or make up your own.</p>
  Note that sometimes a number is converted to ~ and that you can only have 1 response
  per regular expression (the original program randomly chose from a list of responses).</p>

  <pre>
     (SORRY) 
     (PLEASE DON'T A P O L I G I Z E )
      (APOLOGIES ARE NOT NECESSARY) (WHAT FEELINGS
      DO YOU HAVE WHEN YOU APOLOGIZE)
      (IVE TOLD YOU APOLOGIES ARE NOT REQUIRED)
  </pre>
  <pre>
( 0 YOU REMEMBER O) 
(DO YOU OFTEN THINK OF 4)
(DOES THINKING OF ~ BRING ANYTHING ELSE TO MINO)
(WHAT ELSE OO YOU REMEMBER)
(WHY DO YOU REMEMBER 4 JUST NOW)
(WHAT IN THE PRESENT SITUATION REMINDS YOU OF ~)
(WHAT IS THE CONNECTION BETWEEN ME AND ~)
</pre>

<pre>
    ((0 DO I REMEMBER 0) 
    (DID YOU THINK I WOULD FORGET 5)
    (WHY DO YOU THINK I SHOULD RECALL S NOW)
    (WHAT ABOUT 5) (=WHAT) (YOU MENTIONED S))
</pre>

<pre>
   (0 IF 0) 
   (DO YOU THINK ITS LIKELY THAT 3) (DO YOU WISH THAT 3)
    (WHAT DO YOU THINK ABOUT 3) (REALLY, 2 3)))
    (WHAT DO YOU THINK ABOUT ~) (REALLY, 2 3))
</pre>

<pre>
    ((0 YOU DREAMT O)
    (REALLY, ~) (HAVE YOU EVER FANTASIED ~ WWILE YOU WERE AWAKE)
    (HAVE YOU DREAMT ~ BEFORE) (=DREAM) (NEWKFY)))

</pre>

<pre>
    (DREAM)
    WHAT DOES THAT DREAM SUODEST TO YOU)
    (OO YOU DREAM OFTEN) (WHAT PERSONS APPEAR IN YOUR DREAMS)
    (DON'T YOU BELIEVE THAT DREAM HAS SOMETHINC TO ~0 WITH
    YOUR PROBLEM) (NEWKEY)
</pre>

<pre>
  ()
  (I AM NOT SURE I UNDERSTAND YOU FULLY)
  (PLEASE GO ON)
(WHAT DOES THAT SUGGEST TO YOU)
(DO YOU FEEL STRONGLY ABOUT DISCUSSING SUCH THINGS
</pre>

<pre>
  (MAYBE)
    (YOU DON'T SEEM QUITE CERTAIN)
    (WHY THE UNCERTAIN TONE)
    (CAN'T YOU BE MORE POSITIVE) 
    (YOU AREN'T SURE) (DON~T YOU KNOW)))
</pre>

<PRE>
    (NAME 
    (I AM NOT {NTERESTED IN NAMES)
    ( I ' V E TOLD YOU BEFORE, I DON'T CARE ABOUT NAMES - 
    PLEASE CONTINUE)) ) 
</PRE>

<PRE>
  (HELLO)
  (HOW DO YOU DO. PLEASE STATE YOUR PROBLEM)
</PRE>

<PRE>
  (COMPUTER)
  (DO COMPUTERS WORRY YOU)
  (WHY DO YOU MENTION COMPUTERS)
(WHAT DO YOU THINK MACHINES HAVE TO DO WITH YOUR PROBLEM)
(DON'T YOU THINK COMPUTERS CAN HELP PEOPLE)
(WHAT ABOUT MACHINES WORRIES YOU) (WHAT
DO YOU THINK ABOUT MACHINES)))
</PRE>

<PRE>
  (O AM I O) 
  (DO YOU BELIEVE YOU ARE ~)
  (WOULD YOU WANT TO BE 4)
  (YOU WISH I WOULD TELL YOU YOU ARE 4)
  (WHAT WOULD IT MEAN IF YOU WERE 4)
</PRE>

<PRE>
  (0 YOU ARE 0)
  (WHY ARE YOU INTERESTED IN WHETHER I AM 4 OR NOT)
  (WOULD YOU PREFER IF I WEREN'T 4)
  (PERHAPS IAM 4 IN YOUR FANTASIES)
  (DO YOU SOMETIMES THINK I AM 4)
</PRE>

<PRE>
    (O ARE 0)
    (DID YOU THINK THEY MIGHT NOT BE 3)
    (WOULD YOU LIKE IT IF THEY WERE NOT 3)
    (WHAT IF THEY WERE NOT 3)
    (POSSIBLY THEY ARE 3)
</PRE>

<PRE>
  (0 YOUR 0)
  (WHY ARE YOU CONCERNED OVER MY 3)
  (WHAT ABOUT YOUR OWN 3)
  (ARE YOU WORRIED ABOUT SOMEONE ELSE'S 3)
  (REALLY, MY 3)
</PRE>

<PRE>
(0 WAS YOU 0)
(WHAT IF YOU WERE 4)
(WERE YOU 4)
(WHAT WOULD IT MEAN IF YOU WERE 4)
(WERE YOU 4)
</PRE>

<PRE>
  (0 I WAS 0)
  (WEERE YOU REALLY)
  (WHY DO YOU TELL ME YOU WERE 4 NOW)
  (PERHAPS I ALREADY KNEW YOU WERE 4)
</PRE>

<pre>
  (I WANT 0)
  (WHAT WOULD IT MEAN TO YOU IF YOU GOT 4)
  (WHY DO YOU WANT 4)
  (SUPPOSE YOU GOT 4 SOON)
  (WHAT IF YOU NEVER GOT 4)
</pre>

<PRE>
  (I SAID 0)
  (CAN YOU ELABORATE ON THAT)
  (DO YOU SAY 1 FOR SOME SPECIAL REASON)
  (THAT'S QUITE INTERESTING)
</PRE>
</body></html>
