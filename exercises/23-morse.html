<html><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252"><script src="pencilcodeguide.js"></script>
<script>

function filterblocks(a) {
  // Show 'say' block only on browsers that support speech synthesis.
  if (!window.SpeechSynthesisUtterance || !window.speechSynthesis) {
    a = a.filter(function(b) { return !/^@?say\b/.test(b.block); });
  }
  // Show 'listen' blocks only on browsers that support speech recognition.
  if (!window.webkitSpeechRecognition || window.SpeechRecognition) {
    a = a.filter(function(b) { return !/\blisten\b/.test(b.block); });
  }
  return a.map(function(e) {
    if (!e.id) {
      // As the id (for logging), use the first (non-puncutation) word
      e.id = e.block.replace(/^\W*/, '').
             replace(/^new /, '').replace(/\W.*$/, '');
      // If that doesn't turn into anything, use the whole block text.
      if (!e.id) { e.id = e.block; }
    }
    return e;
  });
}

//  This is where we customize the blocks palette 
PencilCodeGuide.session(
{
  palette : [
    {
      name: 'Move',
      color: 'lightblue',
      blocks: filterblocks([
        {
          block: '@fd 100',
          title: 'Move forward'
        }, {
          block: '@rt 90',
          title: 'Turn right'
        }, 
        {
          block: '@lt 90',
          title: 'Turn left'
        }, {
          block: '@bk 100',
          title: 'Move backward'
        }, 
        // {
        //   block: '@rt 180, 100',
        //   title: 'Make a wide right arc'
        // }, {
        //   block: '@lt 180, 100',
        //   title: 'Make a wide left arc'
        // }, 
        {
          block: '@speed 10',
          title: 'Set the speed of the turtle'
        }, 
        // {
        //   block: '@speed Infinity',
        //   title: 'Use infinite speed'
        // }, 
        // {
        //   block: '@home()',
        //   title: 'Jump to the origin, turned up'
        // }, {
        //   block: '@turnto 270',
        //   title: 'Turn to an absolute direction'
        // }, {
        //   block: '@moveto 100, 50',
        //   title: 'Move to coordinates'
        // }, {
        //   block: '@movexy 30, 20',
        //   title: 'Move by changing x and y'
        // }, 
        {
          block: '@jumpto 100, 50',
          title: 'Jump to coordinates without drawing'
        }, 
        // {
        //   block: '@jumpxy 30, 20',
        //   title: 'Jump changing x and y without drawing'
        // }, {
        //   block: '@pause 5',
        //   title: 'Do not move for five seconds'
        // }
      ])
    }, {
      name: 'Control',
      color: 'orange',
      blocks: filterblocks([
        // {
        //   block: 'for [1..3]\n  ``',
        //   title: 'Do something multiple times'
        // }, {
        //   block: 'for x in [0...10]\n  ``',
        //   title: 'Repeat something while counting up x'
        // }, {
        //   block: 'while `` < ``\n  ``',
        //   title: '  Repeat while a condition is true'
        // }, 
        // {
        //   block: 'if `` is ``\n  ``',
        //   title: 'Do something only if a condition is true'
        // }, 
        {
          block: 'if `` > ``\n  ``',
          title: 'Do something only if the left hand side is greater than the right'
        }, 
        // {
        //   block: 'if `` is ``\n  ``\nelse\n  ``',
        //   title:
        //       'Do something if a condition is true, otherwise something else',
        //   id: 'ifelse'
        // }, {
        //   block: "forever 1, ->\n  ``",
        //   title: 'Repeat something forever at qually-spaced times'
        // }, {
        //   block: "button \'Click\', ->\n  ``",
        //   title: 'Make a button and do something when clicked'
        // }, {
        //   block: "keydown \'X\', ->\n  ``",
        //   title: 'Do something when a keyboard key is pressed'
        // }, {
        //   block: "click (e) ->\n  ``",
        //   title: 'Do something when the mouse is clicked'
        // }
      ])
    }, {
      name: 'Art',
      color: 'purple',
      blocks: filterblocks([
         {
          block: '@pen purple, 10',
          title: 'Set pen color and size'
        }, 
        // {
        //   block: '@dot green, 50',
        //   title: 'Make a dot'
        // }, {
        //   block: '@box yellow, 50',
        //   title: 'Make a square'
        // }, {
        //   block: '@fill blue',
        //   title: 'Fill traced shape'
        // }, {
        //   block: '@wear \'apple\'',
        //   title: 'Use an image for the turtle'
        // }, {
        //   block: 'img \'/img/bird\'',
        //   title: 'Write an image on the screen'
        // }, {
        //   block: '@grow 3',
        //   title: 'Grow the size of the turtle'
        // }, {
        //   block: '@hide()',
        //   title: 'Hide the main turtle'
        // }, {
        //   block: '@show()',
        //   title: 'Show the main turtle'
        // }, {
        //   block: 'cs()',
        //   title: 'Clear screen'
        // }, {
        //   block: '@pu()',
        //   title: 'Lift the pen up'
        // }, {
        //   block: '@pd()',
        //   title: 'Put the pen down'
        // }, {
        //   block: '@drawon s',
        //   title: 'Draw on sprite s'
        // }, {
        //   block: '@drawon document',
        //   title: 'Draw on the document'
        // }
      ])
    }, {
      name: 'Operators',
      color: 'lightgreen',
      blocks: filterblocks([
        {
          block: 'x = 0',
          title: 'Set a variable',
          id: 'assign'
        }, 
        {
          block: 'x += 1',
          title: 'Increase a variable',
          id: 'increment'
        }, 
        {
          block: 'f = (x) ->\n  ``',
          title: 'Define a new function',
          id: 'funcdef'
        }, {
          block: 'f(x)',
          title: 'Use a custom function',
          id: 'funccall'
        }, 
        // {
        //   block: '`` is ``',
        //   title: 'Compare two values',
        //   id: 'is'
        // }, 
        // {
        //   block: '`` < ``',
        //   title: 'Compare two values',
        //   id: 'lessthan'
        // }, 
        {
          block: '`` > ``',
          title: 'Compare two values',
          id: 'greaterthan'
        }, 
        {
          block: '`` + ``',
          title: 'Add two numbers',
          id: 'add'
        }, 
        // {
        //   block: '`` - ``',
        //   title: 'Subtract two numbers',
        //   id: 'subtract'
        // }, 
        // {
        //   block: 'return `` - ``',
        //   title: 'Subtract two numbers',
        //   id: 'mysub'
        // }, 
        {
          block: 'return ``',
          title: 'return a value',
          id: 'myreturn'
        }, 
        {
          block: '`` * ``',
          title: 'Multiply two numbers',
          id: 'multiply'
        }, 
        // {
        //   block: '`` / ``',
        //   title: 'Divide two numbers',
        //   id: 'divide'
        // }, 
        // {
        //   block: '`` and ``',
        //   title: 'True if both are true',
        //   id: 'and'
        // }, {
        //   block: '`` or ``',
        //   title: 'True if either is true',
        //   id: 'or'
        // }, {
        //   block: 'not ``',
        //   title: 'True if input is false',
        //   id: 'not'
        // }, 
        {
          block: 'random 6',
          title: 'Get a random number less than n'
        }, 
        // {
        //   block: 'round ``',
        //   title: 'Round to the nearest integer'
        // }, {
        //   block: 'abs ``',
        //   title: 'Absolute value'
        // }, {
        //   block: 'max ``, ``',
        //   title: 'Get the larger of two numbers'
        // }, {
        //   block: 'min ``, ``',
        //   title: 'Get the smaller on two numbers'
        // }, {
        //   block: 'x.match /pattern/',
        //   title: 'Test if a text pattern is found in x',
        //   id: 'match'
        // }
      ])
    }, {
      name: 'Text',
      color: 'pink',
      blocks: filterblocks([
        {
          block: 'write \'Hello.\'',
          title: 'Write text in the document'
        }, 
        // {
        //   block: 'debug x',
        //   title: 'Log an object to debug'
        // }, {
        //   block: 'type \'zz*(-.-)*zz\'',
        //   title: 'Typewrite text in the document'
        // }, {
        //   block: 'typebox yellow',
        //   title: 'Type out a colored square'
        // }, {
        //   block: 'typeline()',
        //   title: 'Type in a new line'
        // }, {
        //   block: '@label \'spot\'',
        //   title: 'Write text at the turtle'
        // }, {
        //   block: "await read '?', defer x",
        //   title: "Pause for input from the user"
        // }, {
        //   block: "await readnum '?', defer x",
        //   title: "Pause for a number from the user"
        // }, {
        //   block: 'read \'?\', (x) ->\n  write x',
        //   title: 'Send input from the user to a function'
        // }, {
        //   block: 'readnum \'?\', (x) ->\n  write x',
        //   title: 'Send a number from the user to a function'
        // }
      ])
    }, 
    //{
    //   name: 'Sprites',
    //   color: 'teal',
    //   blocks: filterblocks([
    //     {
    //       block: 't = new Turtle red',
    //       title: 'Make a new turtle',
    //       id: 'newturtle'
    //     }, {
    //       block: 's = new Sprite()',
    //       title: 'Make a blank sprite',
    //       id: 'newsprite'
    //     }, {
    //       block: 'p = new Piano()',
    //       title: 'Make a visible instrument',
    //       id: 'newpiano'
    //     }, {
    //       block: 'q = new Pencil()',
    //       title: 'Make an invisible and fast drawing sprite'
    //     }, {
    //       block: 'if @touches x\n  ``',
    //       title: 'Do something only if touching the object x'
    //     }, {
    //       block: 'if @inside window\n  ``',
    //       title: 'Do something only if inside the window'
    //     }
    //   ])
    // }, {
    //   name: 'Sound',
    //   color: 'indigo',
    //   blocks: filterblocks([
    //     {
    //       block: '@play \'c G/G/ AG z\'',
    //       title: 'Play music notes in sequence'
    //     }, {
    //       block: '@play \'[fA] [ecG]2\'',
    //       title: 'Play notes in a chord'
    //     }, {
    //       block: '@tone \'B\', 2, 1',
    //       title: 'Sound a note immediately',
    //       id: 'toneNote'
    //     }, {
    //       block: '@tone \'B\', 0',
    //       title: 'Silence a note immediately',
    //       id: 'toneNote0'
    //     }, {
    //       block: '@tone 440, 2, 1',
    //       title: 'Sound a frequency immediately',
    //       id: 'toneHz'
    //     }, {
    //       block: '@tone 440, 0',
    //       title: 'Silence a frequency immediately',
    //       id: 'toneHz0'
    //     }, {
    //       block: '@silence()',
    //       title: 'Silence all notes'
    //     }, {
    //       block: "await listen defer x",
    //       title: "Pause for spoken words from the user"
    //     }, {
    //       block: 'listen (x) ->\n  write x',
    //       title: 'Send spoken words from the user to a function'
    //     }, {
    //       block: '@say \'hello\'',
    //       title: 'Speak a word'
    //     }, {
    //       block: 'new Audio(url).play()',
    //       expansion: '(new Audio(\'https://upload.wikimedia.org/wikipedia/commons/1/11/06_-_Vivaldi_Summer_mvt_3_Presto_-_John_Harrison_violin.ogg\')).play()',
    //       title: 'Play an audio file'
    //     }
    //   ])
    // }, 
    {
      name: 'Snippets',
      color: 'deeporange',
      blocks: filterblocks([
        {
          block: "(write 'Ex 1. Set parameters genomesize, popsize, and mutation rate'\nmorseText = ['..','-.',' ','.-',' ','--.','.','-.','.','-','..','-.-.',' ','.-','.-..','--.','---','.-.','..','-','....','--',' ','.-',' ','.--.','---','.--.','..-','.-..','.-','-','..','---','-.',' ','---','..-.',' ','-.-.','.-','-.','-..','..','-..','.-','-','.',' ','...','---','.-..','..-','-','..','---','-.','...',' ','-','---',' ','.-','-.',' ','---','.--.','-','..','--','..','--..','.-','-','..','---','-.',' ','.--.','.-.','---','-...','.-..','.','--',' ','..','...',' ','.','...-','---','.-..','...-','.','-..',' ','-','---','.--','.-','.-.','-..',' ','-...','.','-','-','.','.-.',' ','...','---','.-..','..-','-','..','---','-.','...',' ','.','.-','-.-.','....',' ','-.-.','.-','-.','-..','..','-..','.-','-','.',' ','...','---','.-..','..-','-','..','---','-.',' ','....','.-','...',' ','.-',' ','...','.','-',' ','---','..-.',' ','.--.','.-.','---','.--.','.','.-.','-','..','.','...',' ','.--','....','..','-.-.','....',' ','-.-.','.-','-.',' ','-...','.',' ','--','..-','-','.-','-','.','-..',' ','.-','-.','-..',' ','.-','.-..','-','.','.-.','.','-..',' ','-','.-.','.-','-..','..','-','..','---','-.','.-','.-..','.-..','-.--',' ','...','---','.-..','..-','-','..','---','-.','...',' ','.-','.-.','.',' ','.-.','.','.--.','.-.','.','...','.','-.','-','.','-..',' ','..','-.',' ','-...','..','-.','.-','.-.','-.--',' ','.-','...',' ','...','-','.-.','..','-.','--.','...',' ','---','..-.',' ',' ','...',' ','.-','-.','-..',' ',' ','...',' ','-...','..-','-',' ','---','-','....','.','.-.',' ','.','-.','-.-.','---','-..','..','-.','--.','...',' ','.-','.-.','.',' ','.-','.-..','...','---',' ','.--.','---','...','...','..','-...','.-..','.',' ','-','....','.',' ','.','...-','---','.-..','..-','-','..','---','-.',' ','..-','...','..-','.-','.-..','.-..','-.--',' ','...','-','.-','.-.','-','...',' ','..-.','.-.','---','--',' ','.-',' ','.--.','---','.--.','..-','.-..','.-','-','..','---','-.',' ','---','..-.',' ','.-.','.-','-.','-..','---','--','.-..','-.--',' ','--.','.','-.','.','.-.','.-','-','.','-..',' ','..','-.','-..','..','...-','..','-..','..-','.-','.-..','...',' ','.-','-.','-..',' ','..','...',' ','.-','-.',' ','..','-','.','.-.','.-','-','..','...-','.',' ','.--.','.-.','---','-.-.','.','...','...',' ','.--','..','-','....',' ','-','....','.',' ','.--.','---','.--.','..-','.-..','.-','-','..','---','-.',' ','..','-.',' ','.','.-','-.-.','....',' ','..','-','.','.-.','.-','-','..','---','-.',' ','-.-.','.-','.-..','.-..','.','-..',' ','.-',' ','--.','.','-.','.','.-.','.-','-','..','---','-.',' ','..','-.',' ','.','.-','-.-.','....',' ','--.','.','-.','.','.-.','.-','-','..','---','-.',' ','-','....','.',' ','..-.','..','-','-.','.','...','...',' ','---','..-.',' ','.','...-','.','.-.','-.--',' ','..','-.','-..','..','...-','..','-..','..-','.-','.-..',' ','..','-.',' ','-','....','.',' ','.--.','---','.--.','..-','.-..','.-','-','..','---','-.',' ','..','...',' ','.','...-','.-','.-..','..-','.-','-','.','-..',' ','-','....','.',' ','..-.','..','-','-.','.','...','...',' ','..','...',' ','..-','...','..-','.-','.-..','.-..','-.--',' ','-','....','.',' ','...-','.-','.-..','..-','.',' ','---','..-.',' ','-','....','.',' ','---','-...','.---','.','-.-.','-','..','...-','.',' ','..-.','..-','-.','-.-.','-','..','---','-.',' ','..','-.',' ','-','....','.',' ','---','.--.','-','..','--','..','--..','.-','-','..','---','-.',' ','.--.','.-.','---','-...','.-..','.','--',' ','-...','.','..','-.','--.',' ','...','---','.-..','...-','.','-..',' ','-','....','.',' ','--','---','.-.','.',' ','..-.','..','-',' ','..','-.','-..','..','...-','..','-..','..-','.-','.-..','...',' ','.-','.-.','.',' ','...','-','---','-.-.','....','.-','...','-','..','-.-.','.-','.-..','.-..','-.--',' ','...','.','.-..','.','-.-.','-','.','-..',' ','..-.','.-.','---','--',' ','-','....','.',' ','-.-.','..-','.-.','.-.','.','-.','-',' ','.--.','---','.--.','..-','.-..','.-','-','..','---','-.',' ','.-','-.','-..',' ','.','.-','-.-.','....',' ','..','-.','-..','..','...-','..','-..','..-','.-','.-..','...',' ','--.','.','-.','---','--','.',' ','..','...',' ','--','---','-..','..','..-.','..','.','-..',' ','-','---',' ','..-.','---','.-.','--',' ','.-',' ','-.','.','.--',' ','--.','.','-.','.','.-.','.-','-','..','---','-.',' ','-','....','.',' ','-.','.','.--',' ','--.','.','-.','.','.-.','.-','-','..','---','-.',' ','---','..-.',' ','-.-.','.-','-.','-..','..','-..','.-','-','.',' ','...','---','.-..','..-','-','..','---','-.','...',' ','..','...',' ','-','....','.','-.',' ','..-','...','.','-..',' ','..','-.',' ','-','....','.',' ','-.','.','-..-','-',' ','..','-','.','.-.','.-','-','..','---','-.',' ','---','..-.',' ','-','....','.',' ','.-','.-..','--.','---','.-.','..','-','....','--',' ','-.-.','---','--','--','---','-.','.-..','-.--',' ','-','....','.',' ','.-','.-..','--.','---','.-.','..','-','....','--',' ','-','.','.-.','--','..','-.','.-','-','.','...',' ','.--','....','.','-.',' ','.','..','-','....','.','.-.',' ','.-',' ','--','.-','-..-','..','--','..-','--',' ','-.','..-','--','-...','.','.-.',' ','---','..-.',' ','--.','.','-.','.','.-.','.-','-','..','---','-.','...',' ','....','.-','...',' ','-...','.','.','-.',' ','.--.','.-.','---','-..','..-','-.-.','.','-..',' ','---','.-.',' ','.-',' ','...','.-','-','..','...','..-.','.-','-.-.','-','---','.-.','-.--',' ','..-.','..','-','-.','.','...','...',' ','.-..','.','...-','.','.-..',' ','....','.-','...',' ','-...','.','.','-.',' ','.-.','.','.-','-.-.','....','.','-..',' ','..-.','---','.-.',' ','-','....','.',' ','.--.','---','.--.','..-','.-..','.-','-','..','---','-.',' ','.-',' ','...','-','.-','-.','-..','.-','.-.','-..',' ','.-.','.','.--.','.-.','.','...','.','-.','-','.-','-','..','---','-.',' ','---','..-.',' ','.','.-','-.-.','....',' ','-.-.','.-','-.','-..','..','-..','.-','-','.',' ','...','---','.-..','..-','-','..','---','-.',' ','..','...',' ','.-','...',' ','.-','-.',' ','.-','.-.','.-.','.-','-.--',' ','---','..-.',' ','-...','..','-','...',' ','.-','.-.','.-.','.-','-.--','...',' ','---','..-.',' ','---','-','....','.','.-.',' ','-','-.--','.--.','.','...',' ','.-','-.','-..',' ','...','-','.-.','..-','-.-.','-','..-','.-.','.','...',' ','-.-.','.-','-.',' ','-...','.',' ','..-','...','.','-..',' ','..','-.',' ','.','...','...','.','-.','-','..','.-','.-..','.-..','-.--',' ','-','....','.',' ','...','.-','--','.',' ','.--','.-','-.--',' ','-','....','.',' ','--','.-','..','-.',' ','.--.','.-.','---','.--.','.','.-.','-','-.--',' ','-','....','.-','-',' ','--','.-','-.-','.','...',' ','-','....','.','...','.',' ','--.','.','-.','.','-','..','-.-.',' ','.-.','.','.--.','.-.','.','...','.','-.','-','.-','-','..','---','-.','...',' ','-.-.','---','-.','...-','.','-.','..','.','-.','-',' ','..','...',' ','-','....','.-','-',' ','-','....','.','..','.-.',' ','.--.','.-','.-.','-','...',' ','.-','.-.','.',' ','.','.-','...','..','.-..','-.--',' ','.-','.-..','..','--.','-.','.','-..',' ','-..','..-','.',' ','-','---',' ','-','....','.','..','.-.',' ','..-.','..','-..-','.','-..',' ','...','..','--..','.',' ','.--','....','..','-.-.','....',' ','..-.','.-','-.-.','..','.-..','..','-','.-','-','.','...',' ','...','..','--','.--.','.-..','.',' ','-.-.','.-.','---','...','...','---','...-','.','.-.',' ','---','.--.','.','.-.','.-','-','..','---','-.','...',' ','...-','.-','.-.','..','.-','-...','.-..','.',' ','.-..','.','-.','--.','-','....',' ','.-.','.','.--.','.-.','.','...','.','-.','-','.-','-','..','---','-.','...',' ','--','.-','-.--',' ','.-','.-..','...','---',' ','-...','.',' ','..-','...','.','-..',' ','-...','..-','-',' ','-.-.','.-.','---','...','...','---','...-','.','.-.',' ','..','--','.--.','.-..','.','--','.','-.','-','.-','-','..','---','-.',' ','..','...',' ','--','---','.-.','.',' ','-.-.','---','--','.--.','.-..','.','-..-',' ','..','-.',' ','-','....','..','...',' ','-.-.','.-','...','.',' ','-','.-.','.','.',' ','.-..','..','-.-','.',' ','.-.','.','.--.','.-.','.','...','.','-.','-','.-','-','..','---','-.','...',' ','.-','.-.','.',' ','.','-..-','.--.','.-..','---','.-.','.','-..',' ','..','-.',' ','--.','.','-.','.','-','..','-.-.',' ','.--.','.-.','---','--.','.-.','.-','--','--','..','-.','--.',' ','.-','-.','-..',' ','--.','.-.','.-','.--.','....',' ','..-.','---','.-.','--',' ','.-.','.','.--.','.-.','.','...','.','-.','-','.-','-','..','---','-.','...',' ','.-','.-.','.',' ','.','-..-','.--.','.-..','---','.-.','.','-..',' ','..','-.',' ','.','...-','---','.-..','..-','-','..','---','-.','.-','.-.','-.--',' ','.--.','.-.','---','--.','.-.','.-','--','--','..','-.','--.',' ','.-',' ','--','..','-..-',' ','---','..-.',' ','-...','---','-','....',' ','.-..','..','-.','.','.-','.-.',' ','-.-.','....','.-.','---','--','---','...','---','--','.','...',' ','.-','-.','-..',' ','-','.-.','.','.','...',' ','..','...',' ','.','-..-','.--.','.-..','---','.-.','.','-..',' ','..','-.',' ','--.','.','-.','.',' ','.','-..-','.--.','.-.','.','...','...','..','---','-.',' ','.--.','.-.','---','--.','.-.','.-','--','--','..','-.','--.',' ','---','-.','-.-.','.',' ','-','....','.',' ','--.','.','-.','.','-','..','-.-.',' ','.-.','.','.--.','.-.','.','...','.','-.','-','.-','-','..','---','-.',' ','.-','-.','-..',' ','-','....','.',' ','..-.','..','-','-.','.','...','...',' ','..-.','..-','-.','-.-.','-','..','---','-.',' ','.-','.-.','.',' ','-..','.','..-.','..','-.','.','-..',' ','.-',' ','--.','.-',' ','.--.','.-.','---','-.-.','.','.','-..','...',' ','-','---',' ','..','-.','..','-','..','.-','.-..','..','--..','.',' ','.-',' ','.--.','---','.--.','..-','.-..','.-','-','..','---','-.',' ','---','..-.',' ','...','---','.-..','..-','-','..','---','-.','...',' ','.-','-.','-..',' ','-','....','.','-.',' ','-','---',' ','..','--','.--.','.-.','---','...-','.',' ','..','-',' ','-','....','.-.','---','..-','--.','....',' ','.-.','.','.--.','.','-','..','-','..','...-','.',' ','.-','.--.','.--.','.-..','..','-.-.','.-','-','..','---','-.',' ','---','..-.',' ','-','....','.',' ','--','..-','-','.-','-','..','---','-.',' ',' ','-.-.','.-.','---','...','...','---','...-','.','.-.',' ','..','-.','...-','.','.-.','...','..','---','-.',' ','.-','-.','-..',' ','...','.','.-..','.','-.-.','-','..','---','-.',' ','---','.--.','.','.-.','.-','-','---','.-.','...']\n\ngenomeSize = ``\npopulationSize = ``\nmutationRate = ``\n\nturtle.remove()\ngrid = table 3, 3\nsolution = table 1,genomeSize)",
          title: "Ex 1. Set parameters genomesize, popsize, and mutation rate",
          id: "ex1"
        },
        {
          block: "(write 'Ex 2. Fill in the blank to do allele swapping in Mutate'\nRandomGenome = () ->\n  genome = (i for i in [0..genomeSize-1])\n  shuffle = (genome.sort (a, b) -> 0.5 - Math.random())\n  return genome\n    \nMutate = (originalGenome) ->\n  genome = (i for i in originalGenome)\n  for j in [0..genomeSize-1]\n    if (random 100)/100 < mutationRate\n      randomIndex = random genomeSize\n      temp = genome[``]\n      genome[randomIndex] = genome[j]\n      genome[j] = temp\n  return genome)",
          title: "Ex 2. Set allele range in random genome, set allele range in mutate",
          id: "ex2"
        },
        {
          block: "(write 'Ex 3. Fill in the blank in MateAndReplace to make the childrens fitness less than the parents'\nMateAndReplace = (workingSet, indexA, indexB) ->\n  parentA = workingSet[indexA]\n  parentB = workingSet[indexB]\n\n  parentA.fitness++\n  parentB.fitness++\n\n  fitSort = workingSet.sort (a, b) -> b.fitness - a.fitness\n \n  leastFit1 = fitSort[fitSort.length-1]\n  leastFit2 = fitSort[fitSort.length-2]\n  leastFit1.genome = Mutate( parentA.genome )\n  leastFit2.genome = Mutate( parentB.genome )\n  leastFit1.fitness = parentA.fitness - ``\n  leastFit2.fitness = parentB.fitness - ``\n\nGetWorkingSet = (population) ->\n  shuffle = (population.sort (a, b) -> 0.5 - Math.random())\n  return shuffle[0..8]\n\nGetDecoder = (member) ->\n  alphabet = 'abcdefghijklmnopqrstuvwxyz '\n  morseDecoder = {'.-' : 0, '-...' : 1, '-.-.' : 2, '-..' : 3, '.' : 4, '..-.' : 5, '--.' : 6, '....' : 7, '..' : 8, '.---' : 9, '-.-' : 10, '.-..' : 11, '--' : 12, '-.' : 13, '---' : 14, '.--.' : 15, '--.-' : 16, '.-.' : 17, '...' : 18, '-' : 19, '..-' : 20, '...-' : 21, '.--' : 22, '-..-' : 23, '-.--' : 24, '--..' : 25, ' ' : 26}\n  for k,v of morseDecoder\n    if v < genomeSize\n      letterPosition = member.genome[v]\n      morseDecoder[k] = alphabet[letterPosition]\n    else\n      morseDecoder[k] = alphabet[v]\n  return morseDecoder\n  \nGetPhenotype = (member,start,length) ->\n  morseDecoder = GetDecoder(member)\n  decodedLetters = ( morseDecoder[ morseText[i] ] for i in [start..start+length] )\n  decodedText = decodedLetters.join('')\n  p = write decodedText\n  p.css {width: 200} \n  return p\n  \nUpdateBest = (population) ->\n  bestScore = 0\n  bestMember = null\n  for m,i in population\n    score = 0\n    for g,i in m.genome\n      if g is i\n        score++\n    if score > bestScore\n      bestScore = score\n      bestMember = m\n  alphabet = 'abcdefghijklmnopqrstuvwxyz'\n  for g,i in bestMember.genome\n    p = write alphabet[i]\n    solution.cell().eq(i).html p\n    if g is i\n      solution.cell().eq(i).css {background : 'green'}\n    else \n      solution.cell().eq(i).css {background : 'white'}\n\nUpdateGrid = (workingSet) ->\n  textLength = 30\n  textStart = random morseText.length-textLength\n  for member,i in workingSet\n    grid.cell().eq(i).html GetPhenotype(member,textStart,textLength)\n    grid.cell().eq(i).css {background : 'white', 'font-size': '24px'}\n  UpdateBest population\n  \npopulation = ( fitness: 0, genome: RandomGenome() for [1..populationSize])\nworkingSet = GetWorkingSet(population)\nUpdateGrid(workingSet)\n\nselections = []\ngrid.cell().click ->\n  selection = grid.cell().index this\n  selections.push(selection)\n  grid.cell().eq(selection).css {background : 'orange'}\n  if selections.length is 2\n    MateAndReplace( workingSet, selections[0], selections[1] )\n    workingSet = GetWorkingSet(population)\n    UpdateGrid(workingSet)\n    selections = [])",
          title: "Ex 3. Fill in the blank in MateAndReplace to make the children's fitness less than the parents",
          id: "ex3"
        },

        //--------------------------------------------------------
        // {
        //   block: "(turtle.remove()\nspeed 100\nfoxLine = new Turtle()\nfoxLine.pen red, 1\nhareLine = new Turtle()\nhareLine.pen green, 1)",
        //   title: "Set up Lotka-Volterra simulation",
        //   id: "lotka-setup"
        // },
        // {
        //   block: "(for time in [1..500] by 10\n  hareLine.moveto time,hares\n  foxLine.moveto time,foxes\n  hares += NewHares hares,foxes\n  foxes += NewFoxes hares,foxes)",
        //   title: "Run Lotka-Volterra simulation",
        //   id: "run-lotka-simulation"
        // },
        // {
        //   block: "forever 10, ->\n  turnto lastmouse\n  fd 2",
        //   title: 'Continually move towards the last mouse position',
        //   id: "foreverFollowMouse"
        // }, {
        //   block: "forever 10, ->\n  if pressed 'W'\n    fd 2",
        //   title: 'Poll a key and move while it is depressed',
        //   id: "foreverPollKey"
        // }, {
        //   block: "forever 1, ->\n  fd 25\n  if not inside window\n    stop()",
        //   title: 'Move once per second until not inside window',
        //   id: "foreverInsideWindow"
        // }, {
        //   block: "click (e) ->\n  moveto e",
        //   title: 'Move to a location when document is clicked',
        //   id: "foreverMovetoClick"
        // }, {
        //   block: "button \'Click\', ->\n  write 'clicked'",
        //   title: 'Make a button and do something when clicked',
        //   id: "buttonWrite"
        // }, {
        //   block: "keydown \'X\', ->\n  write 'x pressed'",
        //   title: 'Do something when a keyboard key is pressed',
        //   id: "keydownWrite"
        // }, {
        //   block: "click (e) ->\n  moveto e",
        //   title: 'Move to a location when document is clicked',
        //   id: "clickMove"
        // }
      ])
    }
  ]
}
);
</script>
</head><body><h1>Breeder Systems: Morse</h1>

<p>We're going to try to breed decoders for Morse code. </p>

<p>This is a multi-step exercise. Do the following in order:</p>
<ul>
    <li>Get Ex 1 block. This block sets global evolution parameters.</li>
    <ul>
      <li>Set parameters genomesize, popsize, and mutation rate to 8, 18, and .3</li>
    </ul>
    <li>Get Ex 2 block. This block defines how the population is initially randomized and how mutation happens.</li>
    <ul>
      <li>Fill in the blank to do allele swapping in Mutate.</li>
    </ul>
    <li>Get Ex 3 block. This block defines how children are produced from parents, and contains the rest of the breeder system code.</li>
    <ul>
      <li>Fill in the blank in MateAndReplace to make the children's fitness less than the parents.</li>
    </ul>
    <li>Breeding</li>
    <ul>
      <li>Try to solve the code - can you get all green boxes filled in? Spend less than 5 minutes on this max.</li>
      <li>If their is only one good parent, don't be afraid to clone, but don't do it too often.</li>
      <li>Do you get stuck and why? </li>
    </ul>
  </ul>

<!-- <img alt="Strahler branching order" src="strahler.jpg" width=500> -->

</body></html>
